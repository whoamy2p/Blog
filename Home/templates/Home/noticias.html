{% extends 'Home/Base/base.html' %}
{% load static %}

{% block content %}
<main class="row">
    <section class="col-12" id="news-section">
        <div class="container-main">
            <div class="container-subctg"
                style="margin-top: 40px; margin-bottom: 30px; border-bottom: 2px solid var(--accent); display: inline-block;">
                <h1 class="title-cours" style="font-size: 1.8rem !important; margin-bottom: 10px;">Últimas Noticias</h1>
            </div>

            <div class="news-grid"
                style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 30px; margin-bottom: 60px;">
                {% for item in news_all %}
                <article class="news-card"
                    style="background: white; border-radius: 15px; overflow: hidden; box-shadow: var(--shadow); transition: transform 0.3s ease, box-shadow 0.3s ease; display: flex; flex-direction: column;">
                    <div class="news-img" style="height: 220px; overflow: hidden;">
                        {% if item.image %}
                        <img src="{{ item.image.url }}" alt="{{ item.title }}"
                            style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease;">
                        {% else %}
                        <img src="{% static 'Home/img/banner.png' %}" alt="placeholder"
                            style="width: 100%; height: 100%; object-fit: cover;">
                        {% endif %}
                    </div>
                    <div class="news-content"
                        style="padding: 25px; flex-grow: 1; display: flex; flex-direction: column;">
                        <div class="news-meta"
                            style="font-size: 0.85rem; color: #888; margin-bottom: 12px; display: flex; gap: 15px; align-items: center;">
                            <span><i class="far fa-calendar-alt" style="color: var(--accent); margin-right: 5px;"></i>
                                {{ item.created_at|date:"d M, Y" }}</span>
                            <span><i class="far fa-user" style="color: var(--accent); margin-right: 5px;"></i> {{
                                item.author }}</span>
                        </div>
                        <h2
                            style="font-size: 1.3rem; color: var(--primary); margin-bottom: 15px; font-weight: 600; line-height: 1.4;">
                            {{ item.title }}</h2>
                        <p
                            style="color: #666; font-size: 0.95rem; line-height: 1.7; margin-bottom: 20px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical;">
                            {{ item.content|truncatewords:30 }}</p>
                        <div style="margin-top: auto;">
                            <a href="#" class="btn-banner"
                                style="display: inline-block; padding: 10px 25px; font-size: 0.9rem; text-decoration: none; border-radius: 5px;">Leer
                                más</a>
                        </div>
                    </div>
                </article>
                {% empty %}
                <div class="no-news" style="grid-column: 1 / -1; text-align: center; padding: 80px 20px;">
                    <i class="far fa-newspaper" style="font-size: 4rem; color: #ddd; margin-bottom: 20px;"></i>
                    <h2 style="color: var(--primary); font-size: 1.5rem;">No hay noticias disponibles</h2>
                    <p style="color: #777;">Vuelve pronto para enterarte de las últimas novedades.</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
</main>

<style>
    .news-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--shadow-hover);
    }

    .news-card:hover .news-img img {
        transform: scale(1.08);
    }
</style>
{% endblock %}